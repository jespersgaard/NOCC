<?php

$cad_StatsTableKoi = array(
'ÔÏ' => 1815, 'ÓÔ' => 1446, 'ÎÅ' => 1438, 'ÎÁ' => 1405, 'ËÏ' => 1207, 'ËÁ' => 1194, 'ÎÏ' => 1177, 'ÅÎ' => 1140, 'ÐÏ' => 1078,
'ÎÉ' => 1073, 'ÇÏ' => 1034, '×Ï' => 1008, 'ÁÌ' => 980, 'ÒÁ' => 947, 'ÏÔ' => 922, 'ÒÏ' => 916, 'ÏÌ' => 870, 'Ï×' => 849, '×Á' => 843,
'ÌÏ' => 840, 'ÏÓ' => 828, 'ÔØ' => 824, 'ÅÔ' => 797, 'ÐÒ' => 794, 'ÏÒ' => 794, 'ÅÌ' => 761, 'ÚÁ' => 752, 'ÏÄ' => 726, 'ÌÉ' => 722,
'ÏÍ' => 686, 'ÔÅ' => 681, 'ÌÁ' => 679, 'ÍÏ' => 649, 'ÍÅ' => 633, 'ÅÒ' => 630, 'ÏÇ' => 629, 'ÔÁ' => 627, 'ÒÅ' => 619, 'ÁË' => 612,
'ÁÔ' => 599, 'ÁÚ' => 596, 'ÏÎ' => 595, '×Å' => 592, 'ÄÅ' => 581, 'ÉÌ' => 578, 'ÒÉ' => 573, 'ÉÔ' => 551, 'ÌØ' => 548, 'ÞÔ' => 547,
'ÏÊ' => 543, 'ÅÍ' => 541, 'ÁÓ' => 527, 'ÄÁ' => 526, 'ÌÅ' => 519, 'ÅÓ' => 516, 'ÓÑ' => 515, 'ÓË' => 515, 'ÄÏ' => 513, 'ÖÅ' => 479,
'ÞÅ' => 478, 'ÓÅ' => 464, 'ÍÉ' => 460, 'ÎÙ' => 457, 'ÅÇ' => 448, 'ÔÉ' => 446, 'É×' => 438, 'ÂÙ' => 437, 'ÁÍ' => 431, 'ÀÌ' => 431,
'ÁÎ' => 425, 'ÏÂ' => 417, '×Ó' => 386, 'ÉÍ' => 386, 'ÉÎ' => 385, 'ÍÎ' => 383, 'ÍÁ' => 373, '×É' => 364, 'ÓÌ' => 361, 'Ô×' => 350,
'ËÉ' => 347, 'ÔÒ' => 346, 'ÓÏ' => 346, 'ÒÕ' => 344, 'ÁÑ' => 343, '×Ù' => 342, 'ÎÑ' => 341, 'Á×' => 340, 'ÎÎ' => 337, 'ÏÅ' => 335,
'ÄÉ' => 335, 'ÛÅ' => 327, 'ÉÅ' => 324, 'ÈÏ' => 324, 'ÞÁ' => 316, 'ÓØ' => 308, 'ÂÏ' => 306, 'ÅÄ' => 296, 'ÅÊ' => 276, 'ÂÅ' => 276,
'ÕÄ' => 267, 'ÁÅ' => 264, 'ÎÕ' => 263, 'ÏË' => 259, 'ÉÓ' => 253, 'ÉÑ' => 253, 'ÄÕ' => 253, 'ØË' => 250, 'ÌÀ' => 243, 'ÐÅ' => 242,
'ÄÎ' => 242, 'ÐÁ' => 240, 'ËÒ' => 239, 'ÙÌ' => 238, 'ÂÕ' => 236, 'ÁÄ' => 235, 'ÜÔ' => 234, 'ÚÎ' => 234, 'ÒÙ' => 231, 'ÏÞ' => 227,
'ÞÉ' => 225, 'ÔÓ' => 225, 'ÔÙ' => 222, 'ÁÒ' => 220, 'ÍÕ' => 219, 'ËÕ' => 218, 'ÙÍ' => 215, 'ÛÉ' => 214, 'ÏÖ' => 210, 'ÎØ' => 210,
'ÁÀ' => 210, 'ÍÙ' => 209, 'ÓÉ' => 208, 'ÁÖ' => 208, 'ÙÊ' => 207, 'ÉË' => 206, 'ÅÅ' => 206, 'ÇÄ' => 203, 'Ó×' => 201, 'ÉÚ' => 200,
'ÌÑ' => 196, 'ÓÁ' => 195, 'ÓÐ' => 193, 'ÖÁ' => 192, 'ÉÈ' => 187, 'ÖÉ' => 184, 'ÕÖ' => 184, 'ØÎ' => 181, 'ÂÒ' => 179, 'ÕÔ' => 175,
'ÁÐ' => 174, 'ÑÔ' => 171, 'ÏÛ' => 170, 'ÙÅ' => 167, 'ÝÅ' => 166, 'ÁÛ' => 165, 'ÄÒ' => 163, 'ÔÕ' => 162, 'ÉÞ' => 162, 'ÉÄ' => 161,
'ÅÞ' => 161, 'ÕÇ' => 160, 'ÅÖ' => 160, 'ÕÛ' => 156, 'ÅË' => 155, 'ÔÎ' => 154, 'ÏÚ' => 153, 'Ù×' => 151, 'ÀÂ' => 150, 'Õ×' => 149,
'ÇÌ' => 148, 'Å×' => 148, '×Ì' => 147, 'ÌÕ' => 147, 'ÛÁ' => 145, 'ÕÓ' => 145, 'ÉÊ' => 144, 'ÅÚ' => 144, 'ÂÁ' => 144, 'ÁÈ' => 144,
'ÓÎ' => 142, 'ÞË' => 139, 'ÏÉ' => 139, 'ØÓ' => 136, 'ÓÍ' => 136, 'ÅÂ' => 136, 'ÕÍ' => 135, 'ÕË' => 132, 'ÕÀ' => 132, 'ÖÄ' => 131,
'ÁÂ' => 131, 'ÕÞ' => 127, 'ÌÓ' => 127, 'ÇÁ' => 127, 'ÙÓ' => 125, 'ÂÉ' => 125, 'ÄÑ' => 124, 'ÇÒ' => 121, 'ÛË' => 119, 'ÞÕ' => 117,
'ÏÐ' => 116, 'ÕÌ' => 114, 'ÒÑ' => 113, 'ÌÙ' => 113, '×Î' => 111, 'Ä×' => 111, 'ÁÞ' => 107, 'ÅÛ' => 105, 'ÅÐ' => 105, 'ÏÑ' => 104,
'ÙÔ' => 103, 'ÒÎ' => 103, 'ÉÃ' => 103, 'ÕÂ' => 102, 'ÇÕ' => 100, 'ÅÈ' => 100, 'ÑÌ' => 99, 'ÃÅ' => 99, 'ÂÌ' => 98, 'ÖÎ' => 97,
'ÀÔ' => 97, 'Ú×' => 96, 'ÄÌ' => 91, '×Õ' => 90, 'ËÌ' => 90, 'ÁÊ' => 90, '×Û' => 88, '×Ò' => 88, 'ÐÌ' => 88, 'ÑÎ' => 87, 'ÝÉ' => 86,
'ÙÛ' => 86, 'ÙÈ' => 86, 'ÐÉ' => 84, 'ËÅ' => 84, 'ÓÕ' => 83, 'ÑÓ' => 83, 'ÉÇ' => 83, 'ÅÝ' => 82, 'ÚÙ' => 80, 'ÚÄ' => 78, 'ÏÀ' => 78,
'×Ú' => 75, 'ÓÓ' => 75, 'ÇÉ' => 75, 'ÄØ' => 74, 'ÉÉ' => 73, 'ÂÑ' => 73, 'ÕÒ' => 72, 'ÄÙ' => 72, 'ÈÁ' => 70, 'ÔÑ' => 69, 'ÐÕ' => 69,
'ËÎ' => 69, 'ÛØ' => 68, 'ÉÒ' => 68, 'ÒÔ' => 67, 'ØÅ' => 66, 'ØÛ' => 65, 'ËÔ' => 65, 'ÉÛ' => 64, 'ÃÁ' => 64, 'ÞÎ' => 63, 'ÒØ' => 63,
'ÕÐ' => 62, 'ÑÍ' => 62, 'ÁÇ' => 62, 'ÛÌ' => 61, 'ÍÑ' => 61, 'ÓÞ' => 59, 'ÉÂ' => 59, 'ÀÄ' => 58, 'ÛÏ' => 57, 'ÌÖ' => 57, 'ÝÁ' => 56,
'ØÑ' => 56, 'ÙÒ' => 54, 'ÑÄ' => 54, 'ÖÕ' => 53, 'ÊÓ' => 53, 'ÙÞ' => 52, 'ØÀ' => 52, 'ÚÇ' => 51, 'ÆÒ' => 51, 'ÀÝ' => 51, 'ÚÏ' => 50,
'ÒÄ' => 50, 'ÉÖ' => 50, '×Ä' => 49, 'ÔË' => 49, 'ÐÙ' => 48, 'ÏÈ' => 48, 'ÌË' => 48, 'ÆÉ' => 48, 'ÉÐ' => 47, 'ÓÙ' => 46, 'ÄÔ' => 46,
'ÁÝ' => 46, 'ÄË' => 45, 'ÚÉ' => 44, 'ÒÌ' => 44, 'ÎÞ' => 44, 'ÎÔ' => 43, 'ÛÎ' => 40, 'ÚÑ' => 40, 'ÕÝ' => 40, 'ÔÞ' => 40, 'ÊÎ' => 40,
'ÉÀ' => 40, 'ÈÌ' => 40, 'ÂË' => 40, 'ÛÕ' => 39, 'ÕÚ' => 39, 'ÌÎ' => 39, 'ÑÅ' => 38, 'ÒÖ' => 37, 'ÄÓ' => 37, 'ÚÒ' => 36, 'ÚÍ' => 36,
'ÕÎ' => 36, 'Ò×' => 36, 'ÕÈ' => 35, 'ÓÄ' => 35, 'ÎÓ' => 35, 'ÎÃ' => 35, 'ÕÅ' => 34, 'ÑÚ' => 34, 'ÏÏ' => 34, 'ÎË' => 34, 'ÚÌ' => 33,
'ÙÎ' => 33, 'ÙË' => 33, 'ÔÌ' => 33, 'ÒÀ' => 33, 'ÅÏ' => 33, 'ÃÏ' => 33, 'ÚÕ' => 32, 'ÀÓ' => 32, 'ÚÅ' => 31, 'ÑÖ' => 31, 'ÊÄ' => 31,
'ÇÅ' => 31, 'ÅÃ' => 31, 'ÙÂ' => 30, 'ÑÀ' => 30, 'ÅÑ' => 30, 'ÅÀ' => 29, 'ÄÃ' => 29, '×Ñ' => 28, 'ÊÛ' => 28, 'ÊÔ' => 27, 'ÆÁ' => 27,
'ÙÄ' => 26, '×Ð' => 26, 'ÒÛ' => 26, 'ÐÑ' => 26, 'ÇÎ' => 26, 'ÑÝ' => 25, 'ÑË' => 25, 'ÄÍ' => 25, 'ÃÕ' => 25, 'ÓÀ' => 24, 'ÏÝ' => 24,
'ÌÞ' => 24, '×Ë' => 23, 'Ñ×' => 23, 'ÈÉ' => 23, 'ÅÉ' => 23, 'ÂÎ' => 23, 'ÀÞ' => 23, 'ØÍ' => 21, 'ÑÑ' => 21, 'ÆÅ' => 21, 'ÙÐ' => 20,
'×Ø' => 20, 'ÓÈ' => 20, 'ÒÓ' => 20, 'ÑÈ' => 20, 'ÑÇ' => 20, 'ÂÝ' => 20, '×Í' => 19, 'ÍÓ' => 19, 'È×' => 19, 'ÃÉ' => 19, 'ÞØ' => 18,
'×Ô' => 18, 'ÒË' => 18, 'ÐÐ' => 18, 'ÎÀ' => 18, 'ÅÕ' => 18, 'ÚØ' => 17, 'ÑÞ' => 17, 'ÁÆ' => 17, 'ÚÂ' => 16, 'ÒÈ' => 16, 'ÎÄ' => 16,
'ÚÖ' => 15, 'ÔÄ' => 15, 'ÉÝ' => 15, 'ÆÕ' => 15, 'ÆÏ' => 15, 'ÃÙ' => 15, 'ÂÓ' => 15, 'ÞÒ' => 14, 'ÖË' => 14, 'ÒÍ' => 14, 'Â×' => 14,
'ÚË' => 13, 'ÙÇ' => 13, 'ÔÔ' => 13, 'ÔÐ' => 13, 'ÒÐ' => 13, 'ÐË' => 13, 'ÍÌ' => 13, 'ÁÉ' => 13, 'ÞÏ' => 12, 'ÝÕ' => 12, 'ÜË' => 12,
'ØÞ' => 12, 'ÕÑ' => 12, 'ÒÂ' => 12, 'ÐØ' => 12, 'ÏÆ' => 12, 'ÏÃ' => 12, 'Ë×' => 12, 'ÉÏ' => 12, 'ÈÕ' => 12, 'ÈÎ' => 12, 'ÁÕ' => 12,
'ØÚ' => 11, 'ØÔ' => 11, 'ÓÒ' => 11, 'ÌÇ' => 11, 'ÇË' => 11, 'ÄÛ' => 11, 'ØÂ' => 10, 'ÒÞ' => 10, 'ÍÒ' => 10, 'ØÃ' => 9, 'ÕÊ' => 9,
'ÒÇ' => 9, 'ÐÔ' => 9, 'ÍË' => 9, 'ÊË' => 9, 'Âß' => 9, 'ÂØ' => 9, 'ßÑ' => 8, 'ÞÛ' => 8, 'ÖÖ' => 8, 'ÑÒ' => 8, 'ÏÜ' => 8, 'ÎÒ' => 8,
'ÊÞ' => 8, 'ÄÈ' => 8, 'ÂÍ' => 8, 'ÁÃ' => 8, 'ÀÒ' => 8, 'ÀÍ' => 8, 'ßÅ' => 7, 'ÚÓ' => 7, 'ØÉ' => 7, 'ÖØ' => 7, 'ÑÐ' => 7, 'ÐÎ' => 7,
'ÍÔ' => 7, 'ÍÐ' => 7, 'ÌÌ' => 7, 'ÉÁ' => 7, 'ÛÐ' => 6, 'ÚÞ' => 6, 'ØÇ' => 6, 'ØÄ' => 6, '×È' => 6, 'ÖÞ' => 6, 'ÖÂ' => 6, 'ÔÝ' => 6,
'ÔÆ' => 6, 'ÓÛ' => 6, 'ÈÒ' => 6, 'ÆÌ' => 6, 'ÞÌ' => 5, 'ÝÎ' => 5, 'ÓÂ' => 5, 'ÑÃ' => 5, 'ÎÆ' => 5, 'ÌÔ' => 5, 'ËÚ' => 5, 'ÆÓ' => 5,
'ÄÀ' => 5, 'Ã×' => 5, 'ÃË' => 5, 'ÂÈ' => 5, 'ÝØ' => 4, 'ÙÖ' => 4, '×Ç' => 4, 'ÖÏ' => 4, 'ÔÃ' => 4, 'ÔÀ' => 4, 'ÒÚ' => 4, 'ÑÉ' => 4,
'ÐÞ' => 4, 'ÍÞ' => 4, 'ÍÍ' => 4, 'ÌÂ' => 4, 'ÊÍ' => 4, 'ÉÆ' => 4, 'ÈÛ' => 4, 'ÆÆ' => 4, 'ÅÁ' => 4, 'Äß' => 4, 'ÄÄ' => 4, 'ÀÎ' => 4,
'ÜÈ' => 3,  'ÙÚ' => 3, 'ÙÕ' => 3, '××' => 3, '×Â' => 3, 'ÓÖ' => 3, 'ÓÃ' => 3, 'ÒÒ' => 3, 'ÑÊ' => 3, 'ÎÝ' => 3, 'ÎÇ' => 3, 'ÍØ' => 3,
'ÍÇ' => 3, 'ÌÄ' => 3, 'ÊÌ' => 3, 'ÈÓ' => 3, 'ÈÅ' => 3, 'ÆØ' => 3, 'ÄÐ' => 3, 'ÂÞ' => 3, 'ÁÜ' => 3, 'ÀÈ' => 3, 'ÀÀ' => 3, 'ÜÚ' => 2,
'ÜÎ' => 2, 'ÜÇ' => 2, 'ÛÔ' => 2, 'ÙÉ' => 2, 'Ø×' => 2, 'ÖÇ' => 2, 'ÕÆ' => 2, 'ÕÁ' => 2, 'Óß' => 2, 'ÓÚ' => 2, 'ÒÆ' => 2, 'ÒÃ' => 2,
'ÑÂ' => 2, 'ÏÕ' => 2, 'ÎÚ' => 2, 'Î×' => 2, 'ÍÝ' => 2, 'ËÛ' => 2, 'ËÓ' => 2, 'ÇÞ' => 2, 'ÇÛ' => 2, 'ÄÞ' => 2, 'ÂÛ' => 2, 'ÀÇ' => 2,
'ßÀ' => 1, 'Ü×' => 1, 'ÜÍ' => 1, 'Û×' => 1, 'ÛÍ' => 1, 'ÚÀ' => 1, '×ß' => 1, '×Þ' => 1, 'ÖÒ' => 1, 'ÖÍ' => 1, 'ÕÕ' => 1, 'ÔÚ' => 1,
'ÔÈ' => 1, 'ÔÇ' => 1, 'ÓÆ' => 1, 'ÒÝ' => 1, 'ÑÕ' => 1, 'ÐÛ' => 1, 'ÐÃ' => 1, 'ÎÂ' => 1, 'ÍÃ' => 1, 'ÌÛ' => 1, 'Ì×' => 1, 'ÌÆ' => 1,
'ËË' => 1,  'ËÆ' => 1, 'ËÃ' => 1, 'ÉÕ' => 1, 'ÈÍ' => 1, 'ÇÔ' => 1, 'ÇÓ' => 1, 'ÆÀ' => 1, 'ÄÖ' => 1, 'ÄÂ' => 1, 'ÂÔ' => 1, 'ÁÏ' => 1,
'ÁÁ' => 1,  'ÀÛ' => 1, 'ÀÖ' => 1, 'ÀË' => 1, 'ÀÃ' => 1
);

$cad_StatsTableWin = array(
'ÒÎ' => 1815, 'ÑÒ' => 1446, 'ÍÅ' => 1438, 'ÍÀ' => 1405, 'ÊÎ' => 1207, 'ÊÀ' => 1194, 'ÍÎ' => 1177, 'ÅÍ' => 1140, 'ÏÎ' => 1078, 'ÍÈ' => 1073,
'ÃÎ' => 1034, 'ÂÎ' => 1008, 'ÀË' => 980, 'ÐÀ' => 947, 'ÎÒ' => 922, 'ÐÎ' => 916, 'ÎË' => 870, 'ÎÂ' => 849, 'ÂÀ' => 843, 'ËÎ' => 840, 'ÎÑ' => 828,
'ÒÜ' => 824, 'ÅÒ' => 797, 'ÏÐ' => 794, 'ÎÐ' => 794, 'ÅË' => 761, 'ÇÀ' => 752, 'ÎÄ' => 726, 'ËÈ' => 722, 'ÎÌ' => 686, 'ÒÅ' => 681, 'ËÀ' => 679,
'ÌÎ' => 649, 'ÌÅ' => 633, 'ÅÐ' => 630, 'ÎÃ' => 629, 'ÒÀ' => 627, 'ÐÅ' => 619, 'ÀÊ' => 612, 'ÀÒ' => 599, 'ÀÇ' => 596, 'ÎÍ' => 595, 'ÂÅ' => 592,
'ÄÅ' => 581, 'ÈË' => 578, 'ÐÈ' => 573, 'ÈÒ' => 551, 'ËÜ' => 548, '×Ò' => 547, 'ÎÉ' => 543, 'ÅÌ' => 541, 'ÀÑ' => 527, 'ÄÀ' => 526, 'ËÅ' => 519,
'ÅÑ' => 516, 'Ñß' => 515, 'ÑÊ' => 515, 'ÄÎ' => 513, 'ÆÅ' => 479, '×Å' => 478, 'ÑÅ' => 464, 'ÌÈ' => 460, 'ÍÛ' => 457, 'ÅÃ' => 448, 'ÒÈ' => 446,
'ÈÂ' => 438, 'ÁÛ' => 437, 'ÀÌ' => 431, 'ÀÍ' => 425, 'ÎÁ' => 417, 'ÈÌ' => 386, 'ÂÑ' => 386, 'ÈÍ' => 385, 'ÌÍ' => 383, 'ÌÀ' => 373, 'ÂÈ' => 364,
'ÑË' => 361, 'ÒÂ' => 350, 'ÊÈ' => 347, 'ÒÐ' => 346, 'ÑÎ' => 346, 'ÐÓ' => 344, 'Àß' => 343, 'ÂÛ' => 342, 'Íß' => 341, 'ÀÂ' => 340, 'ÍÍ' => 337,
'ÎÅ' => 335, 'ÄÈ' => 335, 'ØÅ' => 327, 'ÕÎ' => 324, 'ÈÅ' => 324, '×À' => 316, 'ÑÜ' => 308, 'ÁÎ' => 306, 'ÅÄ' => 296, 'ÅÉ' => 276, 'ÁÅ' => 276,
'ÓÄ' => 267, 'ÀÅ' => 264, 'ÍÓ' => 263, 'ÎÊ' => 259, 'Èß' => 253, 'ÈÑ' => 253, 'ÄÓ' => 253, 'ÜÊ' => 250, 'ËÞ' => 243, 'ÏÅ' => 242, 'ÄÍ' => 242,
'ÏÀ' => 240, 'ÊÐ' => 239, 'ÛË' => 238, 'ÁÓ' => 236, 'ÀÄ' => 235, 'ÝÒ' => 234, 'ÇÍ' => 234, 'ÐÛ' => 231, 'Î×' => 227, '×È' => 225, 'ÒÑ' => 225,
'ÒÛ' => 222, 'ÀÐ' => 220, 'ÌÓ' => 219, 'ÊÓ' => 218, 'ÛÌ' => 215, 'ØÈ' => 214, 'ÎÆ' => 210, 'ÍÜ' => 210, 'ÀÞ' => 210, 'ÌÛ' => 209, 'ÑÈ' => 208,
'ÀÆ' => 208, 'ÛÉ' => 207, 'ÈÊ' => 206, 'ÅÅ' => 206, 'ÃÄ' => 203, 'ÑÂ' => 201, 'ÈÇ' => 200, 'Ëß' => 196, 'ÑÀ' => 195, 'ÑÏ' => 193, 'ÆÀ' => 192,
'ÈÕ' => 187, 'ÓÆ' => 184, 'ÆÈ' => 184, 'ÜÍ' => 181, 'ÁÐ' => 179, 'ÓÒ' => 175, 'ÀÏ' => 174, 'ßÒ' => 171, 'ÎØ' => 170, 'ÛÅ' => 167, 'ÙÅ' => 166,
'ÀØ' => 165, 'ÄÐ' => 163, 'ÒÓ' => 162, 'È×' => 162, 'ÈÄ' => 161, 'Å×' => 161, 'ÓÃ' => 160, 'ÅÆ' => 160, 'ÓØ' => 156, 'ÅÊ' => 155, 'ÒÍ' => 154,
'ÎÇ' => 153, 'ÛÂ' => 151, 'ÞÁ' => 150, 'ÓÂ' => 149, 'ÅÂ' => 148, 'ÃË' => 148, 'ËÓ' => 147, 'ÂË' => 147, 'ØÀ' => 145, 'ÓÑ' => 145, 'ÈÉ' => 144,
'ÅÇ' => 144, 'ÁÀ' => 144, 'ÀÕ' => 144, 'ÑÍ' => 142, '×Ê' => 139, 'ÎÈ' => 139, 'ÜÑ' => 136, 'ÑÌ' => 136, 'ÅÁ' => 136, 'ÓÌ' => 135, 'ÓÞ' => 132,
'ÓÊ' => 132, 'ÆÄ' => 131, 'ÀÁ' => 131, 'Ó×' => 127, 'ËÑ' => 127, 'ÃÀ' => 127, 'ÛÑ' => 125, 'ÁÈ' => 125, 'Äß' => 124, 'ÃÐ' => 121, 'ØÊ' => 119,
'×Ó' => 117, 'ÎÏ' => 116, 'ÓË' => 114, 'Ðß' => 113, 'ËÛ' => 113, 'ÄÂ' => 111, 'ÂÍ' => 111, 'À×' => 107, 'ÅØ' => 105, 'ÅÏ' => 105, 'Îß' => 104,
'ÛÒ' => 103, 'ÐÍ' => 103, 'ÈÖ' => 103, 'ÓÁ' => 102, 'ÅÕ' => 100, 'ÃÓ' => 100, 'ßË' => 99, 'ÖÅ' => 99, 'ÁË' => 98, 'ÞÒ' => 97, 'ÆÍ' => 97,
'ÇÂ' => 96, 'ÄË' => 91, 'ÊË' => 90, 'ÂÓ' => 90, 'ÀÉ' => 90, 'ÏË' => 88, 'ÂØ' => 88, 'ÂÐ' => 88, 'ßÍ' => 87, 'ÛØ' => 86, 'ÛÕ' => 86, 'ÙÈ' => 86,
'ÏÈ' => 84, 'ÊÅ' => 84, 'ßÑ' => 83, 'ÑÓ' => 83, 'ÈÃ' => 83, 'ÅÙ' => 82, 'ÇÛ' => 80, 'ÎÞ' => 78, 'ÇÄ' => 78, 'ÑÑ' => 75, 'ÃÈ' => 75, 'ÂÇ' => 75,
'ÄÜ' => 74, 'ÈÈ' => 73, 'Áß' => 73, 'ÓÐ' => 72, 'ÄÛ' => 72, 'ÕÀ' => 70, 'Òß' => 69, 'ÏÓ' => 69, 'ÊÍ' => 69, 'ØÜ' => 68, 'ÈÐ' => 68, 'ÐÒ' => 67,
'ÜÅ' => 66, 'ÜØ' => 65, 'ÊÒ' => 65, 'ÖÀ' => 64, 'ÈØ' => 64, '×Í' => 63, 'ÐÜ' => 63, 'ßÌ' => 62, 'ÓÏ' => 62, 'ÀÃ' => 62, 'ØË' => 61, 'Ìß' => 61,
'Ñ×' => 59, 'ÈÁ' => 59, 'ÞÄ' => 58, 'ØÎ' => 57, 'ËÆ' => 57, 'Üß' => 56, 'ÙÀ' => 56, 'ßÄ' => 54, 'ÛÐ' => 54, 'ÉÑ' => 53, 'ÆÓ' => 53, 'ÜÞ' => 52,
'Û×' => 52, 'ÞÙ' => 51, 'ÔÐ' => 51, 'ÇÃ' => 51, 'ÐÄ' => 50, 'ÈÆ' => 50, 'ÇÎ' => 50, 'ÒÊ' => 49, 'ÂÄ' => 49, 'ÔÈ' => 48, 'ÏÛ' => 48, 'ÎÕ' => 48,
'ËÊ' => 48, 'ÈÏ' => 47, 'ÑÛ' => 46, 'ÄÒ' => 46, 'ÀÙ' => 46, 'ÄÊ' => 45, 'ÐË' => 44, 'Í×' => 44, 'ÇÈ' => 44, 'ÍÒ' => 43, 'ØÍ' => 40, 'ÕË' => 40,
'ÓÙ' => 40, 'Ò×' => 40, 'ÉÍ' => 40, 'ÈÞ' => 40, 'Çß' => 40, 'ÁÊ' => 40, 'ØÓ' => 39, 'ÓÇ' => 39, 'ËÍ' => 39, 'ßÅ' => 38, 'ÐÆ' => 37, 'ÄÑ' => 37,
'ÓÍ' => 36, 'ÐÂ' => 36, 'ÇÐ' => 36, 'ÇÌ' => 36, 'ÓÕ' => 35, 'ÑÄ' => 35, 'ÍÖ' => 35, 'ÍÑ' => 35, 'ßÇ' => 34, 'ÓÅ' => 34, 'ÎÎ' => 34, 'ÍÊ' => 34,
'ÛÍ' => 33, 'ÛÊ' => 33, 'ÖÎ' => 33, 'ÒË' => 33, 'ÐÞ' => 33, 'ÇË' => 33, 'ÅÎ' => 33, 'ÞÑ' => 32, 'ÇÓ' => 32, 'ßÆ' => 31, 'ÉÄ' => 31, 'ÇÅ' => 31,
'ÅÖ' => 31, 'ÃÅ' => 31, 'ßÞ' => 30, 'ÛÁ' => 30, 'Åß' => 30, 'ÅÞ' => 29, 'ÄÖ' => 29, 'ÉØ' => 28, 'Âß' => 28, 'ÔÀ' => 27, 'ÉÒ' => 27, 'ÛÄ' => 26,
'ÐØ' => 26, 'Ïß' => 26, 'ÃÍ' => 26, 'ÂÏ' => 26, 'ßÙ' => 25, 'ßÊ' => 25, 'ÖÓ' => 25, 'ÄÌ' => 25, 'ÑÞ' => 24, 'ÎÙ' => 24, 'Ë×' => 24, 'ßÂ' => 23,
'Þ×' => 23, 'ÕÈ' => 23, 'ÅÈ' => 23, 'ÂÊ' => 23, 'ÁÍ' => 23, 'ßß' => 21, 'ÜÌ' => 21, 'ÔÅ' => 21, 'ßÕ' => 20, 'ßÃ' => 20, 'ÛÏ' => 20, 'ÑÕ' => 20,
'ÐÑ' => 20, 'ÂÜ' => 20, 'ÁÙ' => 20, 'ÖÈ' => 19, 'ÕÂ' => 19, 'ÌÑ' => 19, 'ÂÌ' => 19, '×Ü' => 18, 'ÐÊ' => 18, 'ÏÏ' => 18, 'ÍÞ' => 18, 'ÅÓ' => 18,
'ÂÒ' => 18, 'ß×' => 17, 'ÇÜ' => 17, 'ÀÔ' => 17, 'ÐÕ' => 16, 'ÍÄ' => 16, 'ÇÁ' => 16, 'ÖÛ' => 15, 'ÔÓ' => 15, 'ÔÎ' => 15, 'ÒÄ' => 15, 'ÈÙ' => 15,
'ÇÆ' => 15, 'ÁÑ' => 15, '×Ð' => 14, 'ÐÌ' => 14, 'ÆÊ' => 14, 'ÁÂ' => 14, 'ÛÃ' => 13, 'ÒÒ' => 13, 'ÒÏ' => 13, 'ÐÏ' => 13, 'ÏÊ' => 13, 'ÌË' => 13,
'ÇÊ' => 13, 'ÀÈ' => 13, 'ÝÊ' => 12, 'Ü×' => 12, 'ÙÓ' => 12, '×Î' => 12, 'ÕÓ' => 12, 'ÕÍ' => 12, 'Óß' => 12, 'ÐÁ' => 12, 'ÏÜ' => 12, 'ÎÖ' => 12,
'ÎÔ' => 12, 'ÊÂ' => 12, 'ÈÎ' => 12, 'ÀÓ' => 12, 'ÜÒ' => 11, 'ÜÇ' => 11, 'ÑÐ' => 11, 'ËÃ' => 11, 'ÄØ' => 11, 'ÃÊ' => 11, 'ÜÁ' => 10, 'Ð×' => 10,
'ÌÐ' => 10, 'ÜÖ' => 9, 'ÓÉ' => 9, 'ÐÃ' => 9, 'ÏÒ' => 9, 'ÌÊ' => 9, 'ÉÊ' => 9, 'ÁÜ' => 9, 'ÁÚ' => 9, 'ßÐ' => 8, 'ÞÐ' => 8, 'ÞÌ' => 8, 'Úß' => 8,
'×Ø' => 8, 'ÎÝ' => 8, 'ÍÐ' => 8, 'É×' => 8, 'ÆÆ' => 8, 'ÄÕ' => 8, 'ÁÌ' => 8, 'ÀÖ' => 8, 'ßÏ' => 7, 'ÜÈ' => 7, 'ÚÅ' => 7, 'ÏÍ' => 7, 'ÌÒ' => 7,
'ÌÏ' => 7, 'ËË' => 7, 'ÈÀ' => 7, 'ÇÑ' => 7, 'ÆÜ' => 7, 'ÜÄ' => 6, 'ÜÃ' => 6, 'ØÏ' => 6, 'ÕÐ' => 6, 'ÔË' => 6, 'ÒÙ' => 6, 'ÒÔ' => 6, 'ÑØ' => 6,
'Ç×' => 6, 'Æ×' => 6, 'ÆÁ' => 6, 'ÂÕ' => 6, 'ßÖ' => 5, 'ÙÍ' => 5, '×Ë' => 5, 'ÖÊ' => 5, 'ÖÂ' => 5, 'ÔÑ' => 5, 'ÑÁ' => 5, 'ÍÔ' => 5, 'ËÒ' => 5,
'ÊÇ' => 5, 'ÄÞ' => 5, 'ÁÕ' => 5, 'ßÈ' => 4, 'ÞÍ' => 4, 'ÛÆ' => 4, 'ÙÜ' => 4, 'ÕØ' => 4, 'ÔÔ' => 4, 'ÒÞ' => 4, 'ÒÖ' => 4, 'ÐÇ' => 4, 'Ï×' => 4,
'Ì×' => 4, 'ÌÌ' => 4, 'ËÁ' => 4, 'ÉÌ' => 4, 'ÈÔ' => 4, 'ÆÎ' => 4, 'ÅÀ' => 4, 'ÄÚ' => 4, 'ÄÄ' => 4, 'ÂÃ' => 4, 'ßÉ' => 3, 'ÞÞ' => 3, 'ÞÕ' => 3,
'ÝÕ' => 3, 'ÛÓ' => 3, 'ÛÇ' => 3, 'ÕÑ' => 3, 'ÕÅ' => 3, 'ÔÜ' => 3, 'ÑÖ' => 3, 'ÑÆ' => 3, 'ÐÐ' => 3, 'ÍÙ' => 3, 'ÍÃ' => 3, 'ÌÜ' => 3, 'ÌÃ' => 3,
'ËÄ' => 3, 'ÉË' => 3, 'ÄÏ' => 3, 'ÂÂ' => 3, 'ÂÁ' => 3, 'Á×' => 3, 'ÀÝ' => 3, 'ßÁ' => 2, 'ÞÃ' => 2, 'ÝÍ' => 2, 'ÝÇ' => 2, 'ÝÃ' => 2, 'ÜÂ' => 2,
'ÛÈ' => 2, 'ØÒ' => 2, 'ÓÔ' => 2, 'ÓÀ' => 2, 'ÑÚ' => 2, 'ÑÇ' => 2, 'ÐÖ' => 2, 'ÐÔ' => 2, 'ÎÓ' => 2, 'ÍÇ' => 2, 'ÍÂ' => 2, 'ÌÙ' => 2, 'ÊØ' => 2,
'ÊÑ' => 2, 'ÆÃ' => 2, 'Ä×' => 2, 'ÃØ' => 2, 'Ã×' => 2, 'ÁØ' => 2, 'ßÓ' => 1, 'ÞØ' => 1, 'ÞÖ' => 1, 'ÞÊ' => 1, 'ÞÆ' => 1, 'ÝÌ' => 1, 'ÝÂ' => 1,
'ÚÞ' => 1, 'ØÌ' => 1, 'ØÂ' => 1, 'ÕÌ' => 1, 'ÔÞ' => 1, 'ÓÓ' => 1, 'ÒÕ' => 1, 'ÒÇ' => 1, 'ÒÃ' => 1, 'ÑÔ' => 1, 'ÐÙ' => 1, 'ÏØ' => 1, 'ÏÖ' => 1,
'ÍÁ' => 1, 'ÌÖ' => 1, 'ËØ' => 1, 'ËÔ' => 1, 'ËÂ' => 1, 'ÊÖ' => 1, 'ÊÔ' => 1, 'ÊÊ' => 1, 'ÈÓ' => 1, 'ÇÞ' => 1, 'ÆÐ' => 1, 'ÆÌ' => 1, 'ÄÆ' => 1,
'ÄÁ' => 1, 'ÃÒ' => 1, 'ÃÑ' => 1, 'ÂÚ' => 1, 'Â×' => 1, 'ÁÒ' => 1, 'ÀÎ' => 1, 'ÀÀ' => 1
);




/* lxnt:  patched to return charset names that iconv() understands*/
function detect_charset($Data,$dbg_fl = 0) {
	/* for many small pices of text -  list of sender/subject*/
        $rc=preg_match("/(.*)([\x7F-\xFF]+)/xU",$Data,$tst_ar);
	if($rc == 0) {
		    return 'US-ASCII';
	} else {
	            $beg_charset=strpos($Data,$tst_ar[2]);
	}
	list($KoiMark,$WinMark) = GetCodeScoreAll($Data,$beg_charset);
	$Ratio['koi8-r'] =  $KoiMark/($WinMark + 1);
	$Ratio['windows-1251'] =  $WinMark/($KoiMark + 1);

        list($MaxRation,$MaxRatioKey)=max_from_ratio($Ratio);
        return $MaxRatioKey;
}

function max_from_ratio($ar) {
	$max=0;
	$max_key="";
	while (list($key,$val)=each($ar)) {
		if ($val>$max) {
			$max=$val;
			$max_key=$key;
		}
	}
	reset($ar);
	return array($max,$max_key);
}

function GetCodeScoreAll($Data,$beg_charset) {
    global $cad_StatsTableWin, $cad_StatsTableKoi;
    $PairSize = 2;

	$Data=substr($Data,$beg_charset,100);
    $Data=preg_replace('/[\n\r]/','',$Data);
    //$old_locale = function_exists('nl_langinfo') ? nl_langinfo(LC_CTYPE) : 'ru_RU.KOI8-R';
	setlocale(LC_CTYPE,'ru_RU.KOI8-R');

	$Mark_koi=0;
	$Mark_win=0;
	$cnt=0;
	$max_detect_limit=10;

	$sp=preg_split('/[\.\,\-\s\:\;\?\!\'\"\(\)\d<>]+/',$Data);
	while ( list($key2,$val2) = each($sp) ) {
		/* for many small pices of text -  words in mesaage body */
        $rc=preg_match("/(.*)([\x7F-\xFF]+)/x",$val2);
        if($rc == 0) {
            continue;
        }

		if($cnt > $max_detect_limit) {
            break;
        } else {
            $cnt++;
        }
		$dlina=strlen($val2)-$PairSize;
		if($dlina < 1) {$cnt--; continue;}
	 	$val3=strtolower($val2);
		if (ucfirst($val3) == $val2) {
            $scaleK=2;
        } else {
            $scaleK=1;
        }
		if(substr($val3,0,1).strtoupper(substr($val2,1,strlen($val2))) == $val2) {
            $scaleW=2;
        } else {
            $scaleW=1;
        }
		$Cur_mark_koi=0;
		$Cur_mark_win=0;
		for ($i=0; $i<$dlina; $i++ ) {
			$pp=substr ($val3, $i, $PairSize);
			if (isset($cad_StatsTableKoi[$pp])) {
                    $Cur_mark_koi += $cad_StatsTableKoi[$pp];
			}
			if (isset($cad_StatsTableWin[$pp])) {
                    $Cur_mark_win += $cad_StatsTableWin[$pp];
            }
		}
		$Mark_koi+=$Cur_mark_koi*$scaleK;
		$Mark_win+=$Cur_mark_win*$scaleW;
	}
	$Mark_list=array($Mark_koi,$Mark_win);
    //setlocale(LC_CTYPE,$old_locale);
	return $Mark_list;
}

?>